<div class="pr-16" fxFlex *ngIf="activeCard === 'form'" cdkPerfectScrollbar>
<form *ngIf="activeCard === 'form'" class="mr-24"
      fxLayout="column"
      fxLayoutAlign="start"
      name="form" [formGroup]="form">

    <div  fxLayout="column" >

<!--        <mat-form-field fxFlex>-->
<!--            <div fxLayout="row" fxLayoutAlign="start center">-->
<!--                <input matInput placeholder="CPF"-->
<!--                       formControlName="username"-->
<!--                       required-->
<!--                       maxlength="11"-->
<!--                       [matAutocomplete]="usuario.autocomplete"-->
<!--                       (blur)="checkUsuario()">-->
<!--            </div>-->
<!--            <cdk-usuario-autocomplete-->
<!--                #usuario="usuarioAutocomplete"-->
<!--                [control]="form.get('username')"-->
<!--                [pagination]="usuarioPagination"-->
<!--                [filtrarPor]="'username'">-->
<!--            </cdk-usuario-autocomplete>-->
<!--            <button matSuffix mat-button mat-icon-button-->
<!--                    (click)="showUsuarioGrid()">-->
<!--                <mat-icon matTooltip="Procurar">search</mat-icon>-->
<!--            </button>-->
<!--            <mat-error *ngIf="form.get('username').hasError('formError')">-->
<!--                {{form.get('username').errors.formError}}-->
<!--            </mat-error>-->
<!--        </mat-form-field>-->

        <mat-form-field fxFlex="100">
            <div fxLayout="row" fxLayoutAlign="start center">
                <input matInput placeholder="CPF2"
                       formControlName="usuario"
                       [matAutocomplete]="usuario.autocomplete" required
                       (blur)="checkUsuario()">
            </div>
            <cdk-usuario-autocomplete
                #usuario="usuarioAutocomplete"
                [control]="form.get('usuarioAux')"
                [pagination]="usuarioPagination"
                [filtrarPor]="'username'">
            </cdk-usuario-autocomplete>
            <button matSuffix mat-button mat-icon-button
                    (click)="showUsuarioGrid()">
                <mat-icon matTooltip="Procurar">search</mat-icon>
            </button>
            <mat-error *ngIf="form.get('usuarioAux') && form.get('usuarioAux').hasError('formError')">
                {{form.get('usuarioAux').errors.formError}}
            </mat-error>
        </mat-form-field>

        <mat-form-field fxFlex="100">
            <mat-label>CPF</mat-label>
            <input matInput #username
                   name="username"
                   formControlName="username"
                   [readonly]="form.value.id"
                   maxlength="255" upperCase>
            <mat-hint align="end">{{username.value.length}} / 255</mat-hint>
        </mat-form-field>

        <mat-form-field fxFlex="100">
            <mat-label>Nome</mat-label>
            <input matInput #nome
                   name="nome"
                   formControlName="nome"
                   maxlength="255" upperCase>
            <mat-hint align="end">{{nome.value.length}} / 255</mat-hint>
        </mat-form-field>

        <mat-form-field fxFlex="100">
            <mat-label>Email</mat-label>
            <input matInput #email
                   name="email"
                   formControlName="email"
                   maxlength="255">
            <mat-hint align="end">{{email.value.length}} / 255</mat-hint>
        </mat-form-field>

        <mat-form-field fxFlex="100">
            <mat-label>NÃ­vel de Acesso</mat-label>
            <input matInput #nivelAcesso
                   name="nivelAcesso"
                   formControlName="nivelAcesso"
                   type="number"
                   max="4"
                   maxlength="2">
        </mat-form-field>

        <mat-checkbox formControlName="enabled"
                      class="mr-16 mb-16" fxFlex="0 1 auto">
            Ativo
        </mat-checkbox>

        <mat-checkbox formControlName="validado" *ngIf="usuarioExterno"
                      class="mr-16 mb-16" fxFlex="0 1 auto">
            Validado
        </mat-checkbox>
    </div>

    <mat-error *ngIf="form.hasError('rulesError')">{{form.errors.rulesError}}</mat-error>

    <div *ngIf="!saving" fxLayout="row" class="mr-sm-12 mt-16 mb-16" fxFlex
         fxLayoutAlign="center center">
        <button mat-raised-button color="accent" class="mr-sm-12" (click)="submit()"
                [disabled]="form.invalid">
            SALVAR
        </button>
        <button mat-raised-button color="warn" type="button" class="mr-sm-12" (click)="doAbort()">
            CANCELAR
        </button>
    </div>

    <div *ngIf="saving" fxLayout="row" class="mr-sm-12 mt-16 mb-16" fxFlex
         fxLayoutAlign="center center">
        <mat-spinner color="accent" diameter="24"></mat-spinner>
    </div>
</form>
</div>

<cdk-usuario-gridsearch
    fxFlex
    *ngIf="activeCard === 'usuario-gridsearch'"
    [pagination]="usuarioPagination"
    (selected)="selectUsuario($event)"
    (cancel)="cancel()">
</cdk-usuario-gridsearch>

<div class="processo-content page-layout carded left-sidebar inner-scroll">

    <!-- TOP BACKGROUND -->
    <div class="top-bg accent"></div>
    <!-- / TOP BACKGROUND -->

    <!-- SIDEBAR -->
    <cdk-sidebar class="sidebar" name="processo-main-sidebar" position="left"
                 [lockedOpen]="routerState.url.indexOf('apps/processo') > -1 ? 'gt-md' : 'gt-xl'">

        <processo-main-sidebar [@animate]="{value:'*'}"></processo-main-sidebar>
    </cdk-sidebar>

    <!-- / SIDEBAR -->

    <!-- CENTER -->
    <div class="center">

        <!-- CONTENT HEADER -->
        <div fxLayout="column">

            <div fxLayout="row" fxLayoutAlign="start center">

                <div class="sidebar-toggle">
                    <button mat-icon-button *ngIf="routerState.url.indexOf('apps/processo') > -1"
                            (click)="toggleSidebar('processo-main-sidebar')" fxHide.gt-md>
                        <mat-icon>menu</mat-icon>
                    </button>
                    <button mat-icon-button *ngIf="routerState.url.indexOf('apps/processo') === -1"
                            (click)="toggleSidebar('processo-main-sidebar')" fxHide.gt-xl>
                        <mat-icon>menu</mat-icon>
                    </button>
                </div>

                <cdk-vinculacao-etiqueta-chips
                    *ngIf="this._loginService.isGranted('ROLE_COLABORADOR') && (processo$ | async)?.id"
                    [vinculacoesEtiquetas]="(processo$ | async)?.vinculacoesEtiquetas"
                    (create)="onEtiquetaCreate($event)"
                    (edit)="onEtiquetaEdit($event)"
                    [savingVincEtiquetaId]="(savingVincEtiquetaId$ | async)"
                    [errors]="(errors$ | async)"
                    [pagination]="vinculacaoEtiquetaPagination"
                    (delete)="onEtiquetaDelete($event)"></cdk-vinculacao-etiqueta-chips>

                <button mat-icon-button [matMenuTriggerFor]="moreMenu" aria-label="Mais Ferramentas"
                        (click)="$event.stopPropagation()"
                        fxHide.xs
                        *ngIf="this._loginService.isGranted('ROLE_COLABORADOR') && (processo$ | async)?.id && (processo$ | async)?.unidadeArquivistica !== 1">
                    <mat-icon class="secondary-text">more_vert</mat-icon>
                </button>

                <mat-menu #moreMenu="matMenu">

                    <button mat-menu-item aria-label="Autuar"
                            (click)="doAutuar()">
                        <ng-container>
                            <mat-icon>check</mat-icon>
                            <span>Autuar</span>
                        </ng-container>
                    </button>

                    <ng-template #dynamicComponent></ng-template>

                </mat-menu>

            </div>
        </div>
        <!-- / CONTENT HEADER -->

        <!-- CONTENT CARD -->
        <div class="content-card">
            <div class="content">
                <router-outlet></router-outlet>
            </div>
        </div>
        <!-- / CONTENT CARD -->

    </div>
    <!-- / CENTER -->

</div>

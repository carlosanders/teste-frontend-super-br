<div class="header">
    <div class="title">{{processo?.especieProcesso?.nome}} ({{processo?.especieProcesso?.generoProcesso?.nome}})</div>
</div>

<div class="content" cdkPerfectScrollbar>
    <mat-card>
        <mat-grid-list cols="4" rowHeight="20px">
            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">NUP:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="1">
                {{ processo.NUP }}
            </mat-grid-tile>

            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">Tipo:</span>
            </mat-grid-tile>
            <mat-grid-tile *ngIf="processo.tipoProtocolo === 1"
                           [colspan]="3"
                           [rowspan]="1">
                PROTOCOLO
            </mat-grid-tile>
            <mat-grid-tile *ngIf="processo.tipoProtocolo === 2"
                           [colspan]="3"
                           [rowspan]="1">
                DOCUMENTO AVULSO
            </mat-grid-tile>
            <mat-grid-tile *ngIf="processo.tipoProtocolo === 3"
                           [colspan]="3"
                           [rowspan]="1">
                UA DOSSIE
            </mat-grid-tile>

            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">Abertura:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="1">
                {{ processo.dataHoraAbertura?.toDate() | date: 'dd/MM/yyyy' }}
            </mat-grid-tile>

            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">Fase Atual:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="1">
                {{ processo.modalidadeFase.valor }}
            </mat-grid-tile>
        </mat-grid-list>
    </mat-card>

    <mat-card>
        <mat-grid-list cols="4" rowHeight="20px">
            <mat-grid-tile
                [colspan]="1"
                [rowspan]="2">
                <span class="subtitle">Classificação:</span>
            </mat-grid-tile>
            <mat-grid-tile [matTooltip]="processo.classificacao.nomeCompleto"
                [colspan]="3"
                [rowspan]="2">
                {{ processo.classificacao.nome }}
            </mat-grid-tile>

            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">Procedência:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="1">
                {{ processo.procedencia.nome }}
            </mat-grid-tile>

            <mat-grid-tile
                [colspan]="1"
                [rowspan]="2">
                <span class="subtitle">Meio:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="2">
                {{ processo.modalidadeMeio.descricao }}
            </mat-grid-tile>

            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">Valor:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="1">
                {{ processo.valorEconomico | number: 'pt-BR' }}
            </mat-grid-tile>
        </mat-grid-list>
    </mat-card>

    <mat-card>
        <mat-grid-list cols="4" rowHeight="20px">
            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">Título:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="1">
                {{ processo.titulo }}
            </mat-grid-tile>

            <mat-grid-tile
                [colspan]="1"
                [rowspan]="3">
                <span class="subtitle">Descrição:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="3">
                {{ processo.descricao }}
            </mat-grid-tile>

            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">Outro Número:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="1">
                {{ processo.outroNumero }}
            </mat-grid-tile>
        </mat-grid-list>
    </mat-card>

    <mat-card>
        <mat-grid-list cols="4" rowHeight="20px">
            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">Setor Atual:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="1">
                {{ processo.setorAtual.nome }}
            </mat-grid-tile>

            <mat-grid-tile
                [colspan]="1"
                [rowspan]="1">
                <span class="subtitle">Localizador:</span>
            </mat-grid-tile>
            <mat-grid-tile
                [colspan]="3"
                [rowspan]="1">
                {{ processo.localizador }}
            </mat-grid-tile>
        </mat-grid-list>
    </mat-card>

    <mat-card>
        <mat-card-subtitle>Processos Vinculados</mat-card-subtitle>
        <cdk-vinculacao-processo-grid
            [loading]="(loadingVinculacoesProcessos$ | async)"
            (reload)="reloadVinculacoesProcessos($event)"
            [actions]="['view']"
            [processoRef]="processo"
            [vinculacoesProcessos]="vinculacoesProcessos"
            [displayedColumns]="['id', 'processo', 'processoVinculado.NUP', 'modalidadeVinculacaoProcesso.valor', 'actions']"
            (view)="view($event)"
            [total]="(paginationVinculacoesProcessos$ | async)?.total">
        </cdk-vinculacao-processo-grid>
    </mat-card>

    <mat-card>
        <mat-card-subtitle>Interessados</mat-card-subtitle>
        <cdk-interessado-grid
            [loading]="(loadingInteressados$ | async)"
            (reload)="reloadInteressados($event)"
            [interessados]="interessados"
            [displayedColumns]="['id', 'pessoa.nome', 'modalidadeInteressado.valor']"
            [total]="(paginationInteressados$ | async)?.total">
        </cdk-interessado-grid>
    </mat-card>

    <mat-card>
        <mat-card-subtitle>Assuntos</mat-card-subtitle>
        <cdk-assunto-grid
            [loading]="(loadingAssuntos$ | async)"
            (reload)="reloadAssuntos($event)"
            [assuntos]="assuntos"
            [displayedColumns]="['id', 'assuntoAdministrativo.nome', 'principal']"
            [total]="(paginationAssuntos$ | async)?.total">
        </cdk-assunto-grid>
    </mat-card>
</div>